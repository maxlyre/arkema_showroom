(self.webpackChunkstrapi=self.webpackChunkstrapi||[]).push([[5199],{78086:function(J,U,t){(function(e,o){J.exports=o(t(67294))})(this,function(e){return function(o){var y={};function p(i){if(y[i])return y[i].exports;var d=y[i]={i,l:!1,exports:{}};return o[i].call(d.exports,d,d.exports,p),d.l=!0,d.exports}return p.m=o,p.c=y,p.d=function(i,d,D){p.o(i,d)||Object.defineProperty(i,d,{enumerable:!0,get:D})},p.r=function(i){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},p.t=function(i,d){if(1&d&&(i=p(i)),8&d||4&d&&typeof i=="object"&&i&&i.__esModule)return i;var D=Object.create(null);if(p.r(D),Object.defineProperty(D,"default",{enumerable:!0,value:i}),2&d&&typeof i!="string")for(var C in i)p.d(D,C,function(Z){return i[Z]}.bind(null,C));return D},p.n=function(i){var d=i&&i.__esModule?function(){return i.default}:function(){return i};return p.d(d,"a",d),d},p.o=function(i,d){return Object.prototype.hasOwnProperty.call(i,d)},p.p="",p(p.s=67)}({0:function(o,y){o.exports=e},67:function(o,y,p){"use strict";p.r(y);var i=p(0);function d(){return(d=Object.assign||function(D){for(var C=1;C<arguments.length;C++){var Z=arguments[C];for(var w in Z)Object.prototype.hasOwnProperty.call(Z,w)&&(D[w]=Z[w])}return D}).apply(this,arguments)}y.default=function(D){return i.createElement("svg",d({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},D),i.createElement("path",{d:"M0 2.8A.8.8 0 01.8 2h22.4a.8.8 0 01.8.8v2.71a1 1 0 01-1 1H1a1 1 0 01-1-1V2.8z",fill:"#32324D"}),i.createElement("path",{d:"M1.922 7.991C.197 6.675 0 6.252 0 5.289h23.953c.305 1.363-1.594 2.506-2.297 3.125-1.953 1.363-6.253 4.36-7.828 5.45-1.575 1.09-3.031.455-3.562 0-2.063-1.41-6.62-4.557-8.344-5.873zM22.8 18H1.2c-.663 0-1.2.471-1.2 1.053v1.894C0 21.529.537 22 1.2 22h21.6c.663 0 1.2-.471 1.2-1.053v-1.894c0-.582-.537-1.053-1.2-1.053z",fill:"#32324D"}),i.createElement("path",{d:"M0 9.555v10.972h24V9.554c-2.633 1.95-8.367 6.113-9.96 7.166-1.595 1.052-3.352.438-4.032 0L0 9.555z",fill:"#32324D"}))}}})})},57338:(J,U,t)=>{"use strict";t.d(U,{Z:()=>o});const o={firstname:"",lastname:"",email:"",roles:[]}},55867:(J,U,t)=>{"use strict";t.d(U,{Z:()=>o});const o=[]},46903:(J,U,t)=>{"use strict";t.r(U),t.d(U,{default:()=>ot});var e=t(67294),o=t(68547),y=t(87751),p=t(78862),i=t(19408),d=t(62031),D=t(84686),C=t(78086),Z=t.n(C),w=t(49656),B=t(97132),_=t(23724),x=t(45697),M=t.n(x),me=t(59522),k=t(5493),fe=t(30741),oe=t(67826),V=t(49425),te=t(41798),ae=t(19352),ne=t.n(ae),se=t(18568),he=t.n(se),ie=t(8610),Ee=Object.defineProperty,Q=Object.getOwnPropertySymbols,le=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable,ue=(s,m,u)=>m in s?Ee(s,m,{enumerable:!0,configurable:!0,writable:!0,value:u}):s[m]=u,pe=(s,m)=>{for(var u in m||(m={}))le.call(m,u)&&ue(s,u,m[u]);if(Q)for(var u of Q(m))X.call(m,u)&&ue(s,u,m[u]);return s},Ce=(s,m)=>{var u={};for(var h in s)le.call(s,h)&&m.indexOf(h)<0&&(u[h]=s[h]);if(s!=null&&Q)for(var h of Q(s))m.indexOf(h)<0&&X.call(s,h)&&(u[h]=s[h]);return u};const q=({canDelete:s,headers:m,entriesToDelete:u,onClickDelete:h,onSelectRow:A,withMainAction:N,withBulkActions:I,rows:E})=>{const{push:P,location:{pathname:W}}=(0,w.useHistory)(),{formatMessage:S}=(0,B.useIntl)();return e.createElement(te.Tbody,null,E.map(O=>{const Y=u.findIndex(K=>K===O.id)!==-1;return e.createElement(te.Tr,pe({key:O.id},(0,o.onRowClick)({fn:()=>P(`${W}/${O.id}`),condition:I})),N&&e.createElement(te.Td,pe({},o.stopPropagation),e.createElement(me.BaseCheckbox,{"aria-label":S({id:"app.component.table.select.one-entry",defaultMessage:"Select {target}"},{target:(0,ie.Pp)(O.firstname,O.lastname)}),checked:Y,onChange:()=>{A({name:O.id,value:!Y})}})),m.map(K=>{var j=K,{key:ee,cellFormatter:H,name:$}=j,z=Ce(j,["key","cellFormatter","name"]);return e.createElement(te.Td,{key:ee},typeof H=="function"?H(O,pe({key:ee,name:$,formatMessage:S},z)):e.createElement(V.Typography,{textColor:"neutral800"},O[$]||"-"))}),I&&e.createElement(te.Td,null,e.createElement(oe.Flex,{justifyContent:"end"},e.createElement(fe.IconButton,{onClick:()=>P(`${W}/${O.id}`),label:S({id:"app.component.table.edit",defaultMessage:"Edit {target}"},{target:(0,ie.Pp)(O.firstname,O.lastname)}),noBorder:!0,icon:e.createElement(ne(),null)}),s&&e.createElement(k.Box,pe({paddingLeft:1},o.stopPropagation),e.createElement(fe.IconButton,{onClick:()=>h(O.id),label:S({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:(0,ie.Pp)(O.firstname,O.lastname)}),noBorder:!0,icon:e.createElement(he(),null)})))))}))};q.defaultProps={canDelete:!1,entriesToDelete:[],onClickDelete:()=>{},onSelectRow:()=>{},rows:[],withBulkActions:!1,withMainAction:!1},q.propTypes={canDelete:M().bool,entriesToDelete:M().array,headers:M().array.isRequired,onClickDelete:M().func,onSelectRow:M().func,rows:M().array,withBulkActions:M().bool,withMainAction:M().bool};const Ze=q;var xe=t(23980),Ne=t.n(xe);const Ie=({displayedFilters:s})=>{const[m,u]=(0,e.useState)(!1),{formatMessage:h}=(0,B.useIntl)(),A=(0,e.useRef)(),N=()=>{u(I=>!I)};return e.createElement(e.Fragment,null,e.createElement(k.Box,{paddingTop:1,paddingBottom:1},e.createElement(i.Button,{variant:"tertiary",ref:A,startIcon:e.createElement(Ne(),null),onClick:N,size:"S"},h({id:"app.utils.filters",defaultMessage:"Filters"})),m&&e.createElement(o.FilterPopoverURLQuery,{displayedFilters:s,isVisible:m,onToggle:N,source:A})),e.createElement(o.FilterListURLQuery,{filtersSchema:s}))};Ie.propTypes={displayedFilters:M().arrayOf(M().shape({name:M().string.isRequired,metadatas:M().shape({label:M().string}),fieldSchema:M().shape({type:M().string})})).isRequired};const je=Ie;var Ge=t(71002),Te=t(87462),Re=t(15861),Ae=t(70885),_e=t(75146),ye=t(34626),Ue=t(68115),we=t(9008),$e=t(80831),Se=t(23998),ze=t(81288);const Qe=[[{intlLabel:{id:"Auth.form.firstname.label",defaultMessage:"First name"},name:"firstname",placeholder:{id:"Auth.form.firstname.placeholder",defaultMessage:"e.g. Kai"},type:"text",size:{col:6,xs:12},required:!0},{intlLabel:{id:"Auth.form.lastname.label",defaultMessage:"Last name"},name:"lastname",placeholder:{id:"Auth.form.lastname.placeholder",defaultMessage:"e.g. Doe"},type:"text",size:{col:6,xs:12}}],[{intlLabel:{id:"Auth.form.email.label",defaultMessage:"Email"},name:"email",placeholder:{id:"Auth.form.email.placeholder",defaultMessage:"e.g. kai.doe@strapi.io"},type:"email",size:{col:6,xs:12},required:!0}]];var Me=t(53209);const Xe=Me.Ry().shape({firstname:Me.Z_().required(o.translatedErrors.required),lastname:Me.Z_(),email:Me.Z_().email(o.translatedErrors.email).required(o.translatedErrors.required),roles:Me.IX().min(1,o.translatedErrors.required).required(o.translatedErrors.required)}),He={create:{buttonSubmitLabel:{id:"app.containers.Users.ModalForm.footer.button-success",defaultMessage:"Invite user"},isDisabled:!1,next:"magic-link"},"magic-link":{buttonSubmitLabel:{id:"global.finish",defaultMessage:"Finish"},isDisabled:!0,next:null}};function Pe(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Pe=function(){return s};var s={},m=Object.prototype,u=m.hasOwnProperty,h=typeof Symbol=="function"?Symbol:{},A=h.iterator||"@@iterator",N=h.asyncIterator||"@@asyncIterator",I=h.toStringTag||"@@toStringTag";function E(n,a,r){return Object.defineProperty(n,a,{value:r,enumerable:!0,configurable:!0,writable:!0}),n[a]}try{E({},"")}catch(n){E=function(r,l,c){return r[l]=c}}function P(n,a,r,l){var c=a&&a.prototype instanceof O?a:O,f=Object.create(c.prototype),v=new Oe(l||[]);return f._invoke=function(b,R,g){var L="suspendedStart";return function(T,de){if(L==="executing")throw new Error("Generator is already running");if(L==="completed"){if(T==="throw")throw de;return De()}for(g.method=T,g.arg=de;;){var F=g.delegate;if(F){var Be=G(F,g);if(Be){if(Be===S)continue;return Be}}if(g.method==="next")g.sent=g._sent=g.arg;else if(g.method==="throw"){if(L==="suspendedStart")throw L="completed",g.arg;g.dispatchException(g.arg)}else g.method==="return"&&g.abrupt("return",g.arg);L="executing";var Le=W(b,R,g);if(Le.type==="normal"){if(L=g.done?"completed":"suspendedYield",Le.arg===S)continue;return{value:Le.arg,done:g.done}}Le.type==="throw"&&(L="completed",g.method="throw",g.arg=Le.arg)}}}(n,r,v),f}function W(n,a,r){try{return{type:"normal",arg:n.call(a,r)}}catch(l){return{type:"throw",arg:l}}}s.wrap=P;var S={};function O(){}function Y(){}function K(){}var j={};E(j,A,function(){return this});var ee=Object.getPrototypeOf,H=ee&&ee(ee(ve([])));H&&H!==m&&u.call(H,A)&&(j=H);var $=K.prototype=O.prototype=Object.create(j);function z(n){["next","throw","return"].forEach(function(a){E(n,a,function(r){return this._invoke(a,r)})})}function ce(n,a){function r(c,f,v,b){var R=W(n[c],n,f);if(R.type!=="throw"){var g=R.arg,L=g.value;return L&&(0,Ge.Z)(L)=="object"&&u.call(L,"__await")?a.resolve(L.__await).then(function(T){r("next",T,v,b)},function(T){r("throw",T,v,b)}):a.resolve(L).then(function(T){g.value=T,v(g)},function(T){return r("throw",T,v,b)})}b(R.arg)}var l;this._invoke=function(c,f){function v(){return new a(function(b,R){r(c,f,b,R)})}return l=l?l.then(v,v):v()}}function G(n,a){var r=n.iterator[a.method];if(r===void 0){if(a.delegate=null,a.method==="throw"){if(n.iterator.return&&(a.method="return",a.arg=void 0,G(n,a),a.method==="throw"))return S;a.method="throw",a.arg=new TypeError("The iterator does not provide a 'throw' method")}return S}var l=W(r,n.iterator,a.arg);if(l.type==="throw")return a.method="throw",a.arg=l.arg,a.delegate=null,S;var c=l.arg;return c?c.done?(a[n.resultName]=c.value,a.next=n.nextLoc,a.method!=="return"&&(a.method="next",a.arg=void 0),a.delegate=null,S):c:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,S)}function ge(n){var a={tryLoc:n[0]};1 in n&&(a.catchLoc=n[1]),2 in n&&(a.finallyLoc=n[2],a.afterLoc=n[3]),this.tryEntries.push(a)}function re(n){var a=n.completion||{};a.type="normal",delete a.arg,n.completion=a}function Oe(n){this.tryEntries=[{tryLoc:"root"}],n.forEach(ge,this),this.reset(!0)}function ve(n){if(n){var a=n[A];if(a)return a.call(n);if(typeof n.next=="function")return n;if(!isNaN(n.length)){var r=-1,l=function c(){for(;++r<n.length;)if(u.call(n,r))return c.value=n[r],c.done=!1,c;return c.value=void 0,c.done=!0,c};return l.next=l}}return{next:De}}function De(){return{value:void 0,done:!0}}return Y.prototype=K,E($,"constructor",K),E(K,"constructor",Y),Y.displayName=E(K,I,"GeneratorFunction"),s.isGeneratorFunction=function(n){var a=typeof n=="function"&&n.constructor;return!!a&&(a===Y||(a.displayName||a.name)==="GeneratorFunction")},s.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,K):(n.__proto__=K,E(n,I,"GeneratorFunction")),n.prototype=Object.create($),n},s.awrap=function(n){return{__await:n}},z(ce.prototype),E(ce.prototype,N,function(){return this}),s.AsyncIterator=ce,s.async=function(n,a,r,l,c){c===void 0&&(c=Promise);var f=new ce(P(n,a,r,l),c);return s.isGeneratorFunction(a)?f:f.next().then(function(v){return v.done?v.value:f.next()})},z($),E($,I,"Generator"),E($,A,function(){return this}),E($,"toString",function(){return"[object Generator]"}),s.keys=function(n){var a=[];for(var r in n)a.push(r);return a.reverse(),function l(){for(;a.length;){var c=a.pop();if(c in n)return l.value=c,l.done=!1,l}return l.done=!0,l}},s.values=ve,Oe.prototype={constructor:Oe,reset:function(a){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(re),!a)for(var r in this)r.charAt(0)==="t"&&u.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var a=this.tryEntries[0].completion;if(a.type==="throw")throw a.arg;return this.rval},dispatchException:function(a){if(this.done)throw a;var r=this;function l(g,L){return v.type="throw",v.arg=a,r.next=g,L&&(r.method="next",r.arg=void 0),!!L}for(var c=this.tryEntries.length-1;c>=0;--c){var f=this.tryEntries[c],v=f.completion;if(f.tryLoc==="root")return l("end");if(f.tryLoc<=this.prev){var b=u.call(f,"catchLoc"),R=u.call(f,"finallyLoc");if(b&&R){if(this.prev<f.catchLoc)return l(f.catchLoc,!0);if(this.prev<f.finallyLoc)return l(f.finallyLoc)}else if(b){if(this.prev<f.catchLoc)return l(f.catchLoc,!0)}else{if(!R)throw new Error("try statement without catch or finally");if(this.prev<f.finallyLoc)return l(f.finallyLoc)}}}},abrupt:function(a,r){for(var l=this.tryEntries.length-1;l>=0;--l){var c=this.tryEntries[l];if(c.tryLoc<=this.prev&&u.call(c,"finallyLoc")&&this.prev<c.finallyLoc){var f=c;break}}f&&(a==="break"||a==="continue")&&f.tryLoc<=r&&r<=f.finallyLoc&&(f=null);var v=f?f.completion:{};return v.type=a,v.arg=r,f?(this.method="next",this.next=f.finallyLoc,S):this.complete(v)},complete:function(a,r){if(a.type==="throw")throw a.arg;return a.type==="break"||a.type==="continue"?this.next=a.arg:a.type==="return"?(this.rval=this.arg=a.arg,this.method="return",this.next="end"):a.type==="normal"&&r&&(this.next=r),S},finish:function(a){for(var r=this.tryEntries.length-1;r>=0;--r){var l=this.tryEntries[r];if(l.finallyLoc===a)return this.complete(l.completion,l.afterLoc),re(l),S}},catch:function(a){for(var r=this.tryEntries.length-1;r>=0;--r){var l=this.tryEntries[r];if(l.tryLoc===a){var c=l.completion;if(c.type==="throw"){var f=c.arg;re(l)}return f}}throw new Error("illegal catch attempt")},delegateYield:function(a,r,l){return this.delegate={iterator:ve(a),resultName:r,nextLoc:l},this.method==="next"&&(this.arg=void 0),S}},s}var ke=function(){return window&&window.strapi&&window.strapi.isEE?t(97083).Z:t(57338).Z}(),Ve=function(){return window&&window.strapi&&window.strapi.isEE?t(810).Z:t(55867).Z}(),Ye=function(){return window&&window.strapi&&window.strapi.isEE?t(12201).Z:t(31605).Z}(),We=function(m){var u=m.queryName,h=m.onToggle,A=(0,e.useState)("create"),N=(0,Ae.Z)(A,2),I=N[0],E=N[1],P=(0,e.useState)(!1),W=(0,Ae.Z)(P,2),S=W[0],O=W[1],Y=(0,e.useState)(null),K=(0,Ae.Z)(Y,2),j=K[0],ee=K[1],H=(0,_.useQueryClient)(),$=(0,B.useIntl)(),z=$.formatMessage,ce=(0,o.useNotification)(),G=(0,o.useOverlayBlocker)(),ge=G.lockApp,re=G.unlockApp,Oe=(0,_.useMutation)(function(v){return Se.be.post("/admin/users",v)},{onSuccess:function(){var v=(0,Re.Z)(Pe().mark(function R(g){var L;return Pe().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return L=g.data,ee(L.data.registrationToken),de.next=4,H.invalidateQueries(u);case 4:n(),O(!1);case 6:case"end":return de.stop()}},R)}));function b(R){return v.apply(this,arguments)}return b}(),onError:function(b){throw O(!1),ce({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}}),b},onSettled:function(){re()}}),ve=z({id:"Settings.permissions.users.create",defaultMessage:"Invite new user"}),De=function(){var v=(0,Re.Z)(Pe().mark(function b(R,g){var L,T;return Pe().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return L=g.setErrors,ge(),O(!0),F.prev=3,F.next=6,Oe.mutateAsync(R);case 6:F.next=12;break;case 8:F.prev=8,F.t0=F.catch(3),re(),(F.t0===null||F.t0===void 0||(T=F.t0.response)===null||T===void 0?void 0:T.data.message)==="Email already taken"&&L({email:F.t0.response.data.message});case 12:case"end":return F.stop()}},b,null,[[3,8]])}));return function(R,g){return v.apply(this,arguments)}}(),n=function(){c?E(c):h()},a=He[I],r=a.buttonSubmitLabel,l=a.isDisabled,c=a.next,f=I==="create"?e.createElement(i.Button,{type:"submit",loading:S},z(r)):e.createElement(i.Button,{type:"button",loading:S,onClick:h},z(r));return e.createElement(_e.ModalLayout,{onClose:h,labelledBy:"title"},e.createElement(_e.ModalHeader,null,e.createElement(Ue.Breadcrumbs,{label:ve},e.createElement(Ue.Crumb,null,ve))),e.createElement($e.Formik,{initialValues:ke,onSubmit:De,validationSchema:Xe,validateOnChange:!1},function(v){var b=v.errors,R=v.handleChange,g=v.values;return e.createElement(o.Form,null,e.createElement(_e.ModalBody,null,e.createElement(we.Stack,{spacing:6},I!=="create"&&e.createElement(Ye,{registrationToken:j}),e.createElement(k.Box,null,e.createElement(V.Typography,{variant:"beta",as:"h2"},z({id:"app.components.Users.ModalCreateBody.block-title.details",defaultMessage:"User details"})),e.createElement(k.Box,{paddingTop:4},e.createElement(we.Stack,{spacing:1},e.createElement(ye.Grid,{gap:5},Qe.map(function(L){return L.map(function(T){return e.createElement(ye.GridItem,(0,Te.Z)({key:T.name},T.size),e.createElement(o.GenericInput,(0,Te.Z)({},T,{disabled:l,error:b[T.name],onChange:R,value:g[T.name]})))})}))))),e.createElement(k.Box,null,e.createElement(V.Typography,{variant:"beta",as:"h2"},z({id:"global.roles",defaultMessage:"User's role"})),e.createElement(k.Box,{paddingTop:4},e.createElement(ye.Grid,{gap:5},e.createElement(ye.GridItem,{col:6,xs:12},e.createElement(ze.Z,{disabled:l,error:b.roles,onChange:R,value:g.roles})),Ve.map(function(L){return L.map(function(T){return e.createElement(ye.GridItem,(0,Te.Z)({key:T.name},T.size),e.createElement(o.GenericInput,(0,Te.Z)({},T,{disabled:l,onChange:R,value:g[T.name]})))})})))))),e.createElement(_e.ModalFooter,{startActions:e.createElement(i.Button,{variant:"tertiary",onClick:h,type:"button"},z({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endActions:f}))}))};We.propTypes={onToggle:M().func.isRequired,queryName:M().array.isRequired};const Je=We,be=({pagination:s})=>e.createElement(k.Box,{paddingTop:4},e.createElement(oe.Flex,{alignItems:"flex-end",justifyContent:"space-between"},e.createElement(o.PageSizeURLQuery,null),e.createElement(o.PaginationURLQuery,{pagination:s})));be.defaultProps={pagination:{pageCount:0,pageSize:10,total:0}},be.propTypes={pagination:M().shape({page:M().number,pageCount:M().number,pageSize:M().number,total:M().number})};const qe=be;var Ke=(s,m,u)=>new Promise((h,A)=>{var N=P=>{try{E(u.next(P))}catch(W){A(W)}},I=P=>{try{E(u.throw(P))}catch(W){A(W)}},E=P=>P.done?h(P.value):Promise.resolve(P.value).then(N,I);E((u=u.apply(s,m)).next())});const et=(s,m)=>Ke(void 0,null,function*(){const{data:{data:u}}=yield Se.be.get(`/admin/users${s}`);return m(),u}),tt=s=>Ke(void 0,null,function*(){yield Se.be.post("/admin/users/batch-delete",{ids:s})}),at=[{name:"firstname",metadatas:{label:"Firstname"},fieldSchema:{type:"string"}},{name:"lastname",metadatas:{label:"Lastname"},fieldSchema:{type:"string"}},{name:"email",metadatas:{label:"Email"},fieldSchema:{type:"email"}},{name:"username",metadatas:{label:"Username"},fieldSchema:{type:"string"}},{name:"isActive",metadatas:{label:"Active user"},fieldSchema:{type:"boolean"}}],Fe=[{name:"firstname",key:"firstname",metadatas:{label:"Firstname",sortable:!0}},{name:"lastname",key:"lastname",metadatas:{label:"Lastname",sortable:!0}},{key:"email",name:"email",metadatas:{label:"Email",sortable:!0}},{key:"roles",name:"roles",metadatas:{label:"Roles",sortable:!1},cellFormatter:({roles:s},{formatMessage:m})=>e.createElement(V.Typography,{textColor:"neutral800"},s.map(u=>m({id:`global.${u.code}`,defaultMessage:u.name})).join(`,
`))},{key:"username",name:"username",metadatas:{label:"Username",sortable:!0}},{key:"isActive",name:"isActive",metadatas:{label:"User status",sortable:!1},cellFormatter:({isActive:s},{formatMessage:m})=>e.createElement(oe.Flex,null,e.createElement(o.Status,{isActive:s,variant:s?"success":"danger"}),e.createElement(V.Typography,{textColor:"neutral800"},m({id:s?"global.active":"global.inactive",defaultMessage:s?"Active":"Inactive"})))}];var nt=(s,m,u)=>new Promise((h,A)=>{var N=P=>{try{E(u.next(P))}catch(W){A(W)}},I=P=>{try{E(u.throw(P))}catch(W){A(W)}},E=P=>P.done?h(P.value):Promise.resolve(P.value).then(N,I);E((u=u.apply(s,m)).next())});const rt=()=>{const[s,m]=(0,e.useState)(!1),{allowedActions:{canCreate:u,canDelete:h,canRead:A}}=(0,o.useRBAC)(y.Z.settings.users),N=(0,_.useQueryClient)(),I=(0,o.useNotification)(),{formatMessage:E}=(0,B.useIntl)(),{search:P}=(0,w.useLocation)();(0,o.useFocusWhenNavigate)();const{notifyStatus:W}=(0,D.useNotifyAT)(),S=["users",P],O=E({id:"global.users",defaultMessage:"Users"}),Y=()=>{W(E({id:"app.utils.notify.data-loaded",defaultMessage:"The {target} has loaded"},{target:O}))},{status:K,data:j,isFetching:ee}=(0,_.useQuery)(S,()=>et(P,Y),{enabled:A,keepPreviousData:!0,retry:!1,staleTime:1e3*20,onError:()=>{I({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}}),H=()=>{m(G=>!G)},$=(0,_.useMutation)(G=>tt(G),{onSuccess:()=>nt(void 0,null,function*(){yield N.invalidateQueries(S)}),onError:G=>{var ge,re;(re=(ge=G==null?void 0:G.response)==null?void 0:ge.data)!=null&&re.data?I({type:"warning",message:G.response.data.data}):I({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}}),z=K!=="success"&&K!=="error"||K==="success"&&ee,ce=u?e.createElement(i.Button,{"data-testid":"create-user-button",onClick:H,startIcon:e.createElement(Z(),null),size:"L"},E({id:"Settings.permissions.users.create",defaultMessage:"Invite new user"})):void 0;return e.createElement(d.Main,{"aria-busy":z},e.createElement(o.SettingsPageTitle,{name:"Users"}),e.createElement(p.HeaderLayout,{primaryAction:ce,title:O,subtitle:E({id:"Settings.permissions.users.listview.header.subtitle",defaultMessage:"All the users who have access to the Strapi admin panel"})}),A&&e.createElement(p.ActionLayout,{startActions:e.createElement(e.Fragment,null,e.createElement(o.SearchURLQuery,{label:E({id:"app.component.search.label",defaultMessage:"Search for {target}"},{target:O})}),e.createElement(je,{displayedFilters:at}))}),e.createElement(p.ContentLayout,{canRead:A},!A&&e.createElement(o.NoPermissions,null),K==="error"&&e.createElement("div",null,"TODO: An error occurred"),A&&e.createElement(e.Fragment,null,e.createElement(o.DynamicTable,{contentType:"Users",isLoading:z,onConfirmDeleteAll:$.mutateAsync,onConfirmDelete:G=>$.mutateAsync([G]),headers:Fe,rows:j==null?void 0:j.results,withBulkActions:!0,withMainAction:h},e.createElement(Ze,{canDelete:h,headers:Fe,rows:(j==null?void 0:j.results)||[],withBulkActions:!0,withMainAction:h})),e.createElement(qe,{pagination:j==null?void 0:j.pagination}))),s&&e.createElement(Je,{onToggle:H,queryName:S}))},ot=()=>e.createElement(o.CheckPagePermissions,{permissions:y.Z.settings.users.main},e.createElement(rt,null))},82464:(J,U,t)=>{"use strict";t.d(U,{Z:()=>k});var e=t(67294),o=t(45697),y=t.n(o),p=t(30741),i=t.n(p),d=t(68547),D=t.n(d),C=t(67483),Z=t.n(C),w=t(74855),B=t.n(w),_=t(97132),x=t.n(_);const M=()=>e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg"},e.createElement("text",{transform:"translate(-23 -9)",fill:"#4B515A",fillRule:"evenodd",fontSize:"32",fontFamily:"AppleColorEmoji, Apple Color Emoji"},e.createElement("tspan",{x:"23",y:"36"},"\u2709\uFE0F"))),me=({children:fe,target:oe})=>{const V=(0,d.useNotification)(),{formatMessage:te}=(0,_.useIntl)(),ae=()=>{V({type:"info",message:{id:"notification.link-copied"}})},ne=te({id:"app.component.CopyToClipboard.label",defaultMessage:"Copy to clipboard"});return e.createElement(d.ContentBox,{endAction:e.createElement(w.CopyToClipboard,{onCopy:ae,text:oe},e.createElement(p.IconButton,{label:ne,noBorder:!0,icon:e.createElement(Z(),null)})),title:oe,titleEllipsis:!0,subtitle:fe,icon:e.createElement(M,null),iconBackground:"neutral100"})};me.propTypes={children:y().oneOfType([y().element,y().string]).isRequired,target:y().string.isRequired};const k=me},31605:(J,U,t)=>{"use strict";t.d(U,{Z:()=>Z});var e=t(67294),o=t(97132),y=t.n(o),p=t(45697),i=t.n(p),d=t(63871),D=t(82464);const C=({registrationToken:w})=>{const{formatMessage:B}=(0,o.useIntl)(),_=`${window.location.origin}${d.Z}auth/register?registrationToken=${w}`;return e.createElement(D.Z,{target:_},B({id:"app.components.Users.MagicLink.connect",defaultMessage:"Copy and share this link to give access to this user"}))};C.defaultProps={registrationToken:""},C.propTypes={registrationToken:i().string};const Z=C},81288:(J,U,t)=>{"use strict";t.d(U,{Z:()=>te});var e=t(67294),o=t(45697),y=t.n(o),p=t(97132),i=t.n(p),d=t(43808),D=t.n(d),C=t(23724),Z=t.n(C),w=t(78384),B=t(57572),_=t.n(B),x=t(23998),M=(ae,ne,se)=>new Promise((he,ie)=>{var Ee=X=>{try{le(se.next(X))}catch(ue){ie(ue)}},Q=X=>{try{le(se.throw(X))}catch(ue){ie(ue)}},le=X=>X.done?he(X.value):Promise.resolve(X.value).then(Ee,Q);le((se=se.apply(ae,ne)).next())});const me=w.keyframes`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(359deg);
  }
`,k=w.default.div`
  animation: ${me} 2s infinite linear;
`,fe=()=>e.createElement(k,null,e.createElement(_(),null)),oe=()=>M(void 0,null,function*(){const{data:ae}=yield x.be.get("/admin/roles");return ae.data}),V=({disabled:ae,error:ne,onChange:se,value:he})=>{const{status:ie,data:Ee}=(0,C.useQuery)(["roles"],oe,{staleTime:5e4}),{formatMessage:Q}=(0,p.useIntl)(),le=ne?Q({id:ne,defaultMessage:ne}):"",X=Q({id:"app.components.Users.ModalCreateBody.block-title.roles",defaultMessage:"User's roles"}),ue=Q({id:"app.components.Users.ModalCreateBody.block-title.roles.description",defaultMessage:"A user can have one or several roles"}),pe=Q({id:"app.components.Select.placeholder",defaultMessage:"Select"}),Ce=ie==="loading"?e.createElement(fe,null):void 0;return e.createElement(d.Select,{id:"roles",disabled:ae,error:le,hint:ue,label:X,name:"roles",onChange:q=>{se({target:{name:"roles",value:q}})},placeholder:pe,multi:!0,startIcon:Ce,value:he,withTags:!0,required:!0},(Ee||[]).map(q=>e.createElement(d.Option,{key:q.id,value:q.id},Q({id:`global.${q.code}`,defaultMessage:q.name}))))};V.defaultProps={disabled:!1,error:void 0},V.propTypes={disabled:y().bool,error:y().string,onChange:y().func.isRequired,value:y().array.isRequired};const te=V},97083:(J,U,t)=>{"use strict";t.d(U,{Z:()=>w});var e=t(57338),o=Object.defineProperty,y=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,d=(B,_,x)=>_ in B?o(B,_,{enumerable:!0,configurable:!0,writable:!0,value:x}):B[_]=x,D=(B,_)=>{for(var x in _||(_={}))p.call(_,x)&&d(B,x,_[x]);if(y)for(var x of y(_))i.call(_,x)&&d(B,x,_[x]);return B};const C=strapi.features.isEnabled(strapi.features.SSO)?{useSSORegistration:!0}:{},w=D(D({},e.Z),C)},810:(J,U,t)=>{"use strict";t.d(U,{Z:()=>o});const o=strapi.features.isEnabled(strapi.features.SSO)?[[{intlLabel:{id:"Settings.permissions.users.form.sso",defaultMessage:"Connect with SSO"},hint:{id:"Settings.permissions.users.form.sso.description",defaultMessage:"When enabled (ON), users can login via SSO"},name:"useSSORegistration",type:"bool",size:{col:6,xs:12}}]]:[]},12201:(J,U,t)=>{"use strict";t.d(U,{Z:()=>Z});var e=t(67294),o=t(97132),y=t.n(o),p=t(45697),i=t.n(p),d=t(63871),D=t(82464);const C=({registrationToken:w})=>{const{formatMessage:B}=(0,o.useIntl)();return w?e.createElement(D.Z,{target:`${window.location.origin}${d.Z}auth/register?registrationToken=${w}`},B({id:"app.components.Users.MagicLink.connect",defaultMessage:"Copy and share this link to give access to this user"})):e.createElement(D.Z,{target:`${window.location.origin}${d.Z}auth/login`},B({id:"app.components.Users.MagicLink.connect.sso",defaultMessage:"Send this link to the user, the first login can be made via a SSO provider."}))};C.defaultProps={registrationToken:""},C.propTypes={registrationToken:i().string};const Z=C}}]);
